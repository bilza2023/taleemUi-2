import{s as st,r as at}from"../chunks/scheduler.k9AsmmqN.js";import{S as rt,i as nt,c as P,s as E,a as L,b as I,m as R,d as m,t as S,e as N,f as i,g as T,h as $,j as v,k as b,l as d,n as C,o as M,p as F,q as Q,r as tt,u as et}from"../chunks/index.16X8BF3e.js";/* empty css                                                    */import{F as it,B as lt}from"../chunks/FormElm.oiIa2nS2.js";import{t as U}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.tzopxu9Y.js";import{g as X}from"../chunks/entry.-eBFRa5r.js";import{I as Z}from"../chunks/icons.s_L1VXoT.js";import{H as ot}from"../chunks/NavBtn.vBjdeleK.js";import{P as ut}from"../chunks/PageWrapper.kfEPS4UO.js";import{A as ft}from"../chunks/config.P5edGPc2.js";import{a as ct}from"../chunks/ajaxPost.LQLWhdZh.js";import{N as mt}from"../chunks/Nav.oHUW9E2N.js";function pt(l,t,s){let r=[];return l.length<t&&r.push(`The string length must be at least ${t} characters.`),l.length>s&&r.push(`The string length must be at most ${s} characters.`),r.length>0?{status:"error",errors:r}:{status:"ok"}}function dt(l){const t=[];/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)||t.push("Email address is invalid"),l.indexOf("@")===-1&&t.push("Email address must contain @ symbol");const r=l.split("@")[1];return r||t.push("Email address must contain domain name"),/^[^\s@]+\.[^\s@]+$/.test(r)||t.push("Domain name is invalid"),t.length>0?{status:"error",errors:t}:{status:"ok"}}async function $t(l,t){try{debugger;if(dt(l).status!=="ok"){U.push("Not a valid email");return}if(pt(t,6,30).status!=="ok"){U.push("password must have 6 to 30 characters");return}const n=await ct(`${ft}/auth/login`,{email:l,password:t});debugger;if(n.ok){const a=await n.json();localStorage.setItem("token",a.token),localStorage.setItem("email",a.email),X("/")}else{const a=await n.json();a.errorcode=="AccountNotVerified"&&X("/verify"),U.push(a.message)}}catch{U.push("failed to login")}}function vt(l){let t;return{c(){t=tt("Login")},l(s){t=et(s,"Login")},m(s,r){m(s,t,r)},d(s){s&&i(t)}}}function gt(l){let t;return{c(){t=tt("Login")},l(s){t=et(s,"Login")},m(s,r){m(s,t,r)},d(s){s&&i(t)}}}function ht(l){let t,s,r,n,a="Email",f,p,o,c,g,_,K="Password",q,y,j,h,A,w,O='<a href="/forgot_password" class="text-yellow-700 text-lg">forgot password</a>',B,V,x,H,W,Y;return s=new ot({props:{icon:Z.KEY,$$slots:{default:[vt]},$$scope:{ctx:l}}}),x=new lt({props:{icons:Z.SAVE,clk:l[4],$$slots:{default:[gt]},$$scope:{ctx:l}}}),{c(){t=$("div"),P(s.$$.fragment),r=E(),n=$("div"),n.textContent=a,f=E(),p=$("div"),o=$("div"),c=$("input"),g=E(),_=$("div"),_.textContent=K,q=E(),y=$("div"),j=$("div"),h=$("input"),A=E(),w=$("div"),w.innerHTML=O,B=E(),V=$("div"),P(x.$$.fragment),this.h()},l(e){t=v(e,"DIV",{class:!0});var u=b(t);L(s.$$.fragment,u),u.forEach(i),r=I(e),n=v(e,"DIV",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-klynmt"&&(n.textContent=a),f=I(e),p=v(e,"DIV",{class:!0});var k=b(p);o=v(k,"DIV",{class:!0});var D=b(o);c=v(D,"INPUT",{type:!0,class:!0}),D.forEach(i),k.forEach(i),g=I(e),_=v(e,"DIV",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-1by2qsq"&&(_.textContent=K),q=I(e),y=v(e,"DIV",{class:!0});var z=b(y);j=v(z,"DIV",{class:!0});var G=b(j);h=v(G,"INPUT",{type:!0,class:!0}),G.forEach(i),z.forEach(i),A=I(e),w=v(e,"DIV",{class:!0,"data-svelte-h":!0}),M(w)!=="svelte-1h7bq5"&&(w.innerHTML=O),B=I(e),V=v(e,"DIV",{class:!0});var J=b(V);L(x.$$.fragment,J),J.forEach(i),this.h()},h(){d(t,"class","flex justify-center"),d(n,"class","flex justify-center pt-1 text-white"),d(c,"type","email"),d(c,"class","w-full bg-gray-700 color-white p-2 m-1 rounded-md"),d(o,"class","w-6/12 text-center"),d(p,"class","flex justify-center pt-1"),d(_,"class","flex justify-center pt-1 text-white"),d(h,"type","password"),d(h,"class","w-full bg-gray-700 color-white p-2 m-1 rounded-md"),d(j,"class","w-6/12 text-center"),d(y,"class","flex justify-center pt-1"),d(w,"class","flex justify-center"),d(V,"class","flex justify-center ")},m(e,u){m(e,t,u),R(s,t,null),m(e,r,u),m(e,n,u),m(e,f,u),m(e,p,u),C(p,o),C(o,c),F(c,l[0]),m(e,g,u),m(e,_,u),m(e,q,u),m(e,y,u),C(y,j),C(j,h),F(h,l[1]),m(e,A,u),m(e,w,u),m(e,B,u),m(e,V,u),R(x,V,null),H=!0,W||(Y=[Q(c,"input",l[2]),Q(h,"input",l[3])],W=!0)},p(e,u){const k={};u&32&&(k.$$scope={dirty:u,ctx:e}),s.$set(k),u&1&&c.value!==e[0]&&F(c,e[0]),u&2&&h.value!==e[1]&&F(h,e[1]);const D={};u&3&&(D.clk=e[4]),u&32&&(D.$$scope={dirty:u,ctx:e}),x.$set(D)},i(e){H||(S(s.$$.fragment,e),S(x.$$.fragment,e),H=!0)},o(e){N(s.$$.fragment,e),N(x.$$.fragment,e),H=!1},d(e){e&&(i(t),i(r),i(n),i(f),i(p),i(g),i(_),i(q),i(y),i(A),i(w),i(B),i(V)),T(s),T(x),W=!1,at(Y)}}}function _t(l){let t,s,r,n,a,f,p;return f=new it({props:{$$slots:{default:[ht]},$$scope:{ctx:l}}}),{c(){t=$("br"),s=$("br"),r=E(),n=$("div"),a=$("div"),P(f.$$.fragment),this.h()},l(o){t=v(o,"BR",{}),s=v(o,"BR",{}),r=I(o),n=v(o,"DIV",{class:!0});var c=b(n);a=v(c,"DIV",{class:!0});var g=b(a);L(f.$$.fragment,g),g.forEach(i),c.forEach(i),this.h()},h(){d(a,"class","w-10/12 "),d(n,"class","flex justify-center w-full")},m(o,c){m(o,t,c),m(o,s,c),m(o,r,c),m(o,n,c),C(n,a),R(f,a,null),p=!0},p(o,c){const g={};c&35&&(g.$$scope={dirty:c,ctx:o}),f.$set(g)},i(o){p||(S(f.$$.fragment,o),p=!0)},o(o){N(f.$$.fragment,o),p=!1},d(o){o&&(i(t),i(s),i(r),i(n)),T(f)}}}function wt(l){let t,s,r,n;return t=new mt({}),r=new ut({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}}),{c(){P(t.$$.fragment),s=E(),P(r.$$.fragment)},l(a){L(t.$$.fragment,a),s=I(a),L(r.$$.fragment,a)},m(a,f){R(t,a,f),m(a,s,f),R(r,a,f),n=!0},p(a,[f]){const p={};f&35&&(p.$$scope={dirty:f,ctx:a}),r.$set(p)},i(a){n||(S(t.$$.fragment,a),S(r.$$.fragment,a),n=!0)},o(a){N(t.$$.fragment,a),N(r.$$.fragment,a),n=!1},d(a){a&&i(s),T(t,a),T(r,a)}}}function xt(l,t,s){let r="",n="";function a(){r=this.value,s(0,r)}function f(){n=this.value,s(1,n)}return[r,n,a,f,()=>$t(r,n)]}class St extends rt{constructor(t){super(),nt(this,t,xt,wt,st,{})}}export{St as component};
