import{s as H,n as N,k as fe,o as ae}from"../chunks/scheduler.k9AsmmqN.js";import{S as U,i as q,x as P,d as _,A as W,e as $,y as z,t as w,f as h,h as k,j as E,k as M,l as C,C as F,o as ue,c as B,s as x,a as D,b as I,m as Q,n as S,g as j,r as R,u as A,q as ce,v as G,D as he,E as me}from"../chunks/index.16X8BF3e.js";/* empty css                                                    */import{t as K}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.tzopxu9Y.js";import"../chunks/entry.-eBFRa5r.js";import{A as de}from"../chunks/config.P5edGPc2.js";import{I as oe}from"../chunks/icons.s_L1VXoT.js";import{a as _e}from"../chunks/ajaxPost.LQLWhdZh.js";import{H as pe}from"../chunks/NavBtn.vBjdeleK.js";import{P as ge}from"../chunks/PageWrapper.kfEPS4UO.js";import{N as be}from"../chunks/Nav.oHUW9E2N.js";import{e as V}from"../chunks/each.NS6M4lSo.js";import{C as ve}from"../chunks/Card.NmYNO6UJ.js";import{f as X}from"../chunks/index.WdP0tWe1.js";function ke(){const a=localStorage.getItem("token");return!(!a||a==""||a==null)}function Ee(){const a=localStorage.getItem("teacher_status");return!a||a==""||a==null?!1:a=="admin"}function Y(a,e,l){const t=a.slice();return t[5]=e[l],t[7]=l,t}function we(a){let e,l,t=V(a[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Z(Y(a,t,n));const i=n=>$(s[n],1,1,()=>{s[n]=null});return{c(){e=k("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var c=M(e);for(let r=0;r<s.length;r+=1)s[r].l(c);c.forEach(h),this.h()},h(){C(e,"class","flex bg-gray-700 p-2 m-2 rounded-md w-full justify-center flex-wrap ")},m(n,c){_(n,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);l=!0},p(n,c){if(c&3){t=V(n[1]);let r;for(r=0;r<t.length;r+=1){const f=Y(n,t,r);s[r]?(s[r].p(f,c),w(s[r],1)):(s[r]=Z(f),s[r].c(),w(s[r],1),s[r].m(e,null))}for(W(),r=t.length;r<s.length;r+=1)i(r);z()}},i(n){if(!l){for(let c=0;c<t.length;c+=1)w(s[c]);l=!0}},o(n){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)$(s[c]);l=!1},d(n){n&&h(e),F(s,n)}}}function ye(a){let e,l='<h1 class="bg-stone-600 p-2 m-2 rounded-lg">No Question found!</h1>';return{c(){e=k("div"),e.innerHTML=l,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1fvm4v5"&&(e.innerHTML=l),this.h()},h(){C(e,"class","flex justify-center w-full")},m(t,s){_(t,e,s)},p:N,i:N,o:N,d(t){t&&h(e)}}}function Z(a){let e,l,t,s;return l=new ve({props:{title:ee(a[5]),icon:oe.TEST,url:`/player?tcode=${a[0]}&filename=${a[5].filename}`}}),{c(){e=k("div"),B(l.$$.fragment),t=x(),this.h()},l(i){e=E(i,"DIV",{class:!0});var n=M(e);D(l.$$.fragment,n),t=I(n),n.forEach(h),this.h()},h(){C(e,"class","w-3/12")},m(i,n){_(i,e,n),Q(l,e,null),S(e,t),s=!0},p(i,n){const c={};n&2&&(c.title=ee(i[5])),n&3&&(c.url=`/player?tcode=${i[0]}&filename=${i[5].filename}`),l.$set(c)},i(i){s||(w(l.$$.fragment,i),s=!0)},o(i){$(l.$$.fragment,i),s=!1},d(i){i&&h(e),j(l)}}}function $e(a){let e,l,t,s;const i=[ye,we],n=[];function c(r,f){return r[1].length<=0?0:1}return e=c(a),l=n[e]=i[e](a),{c(){l.c(),t=P()},l(r){l.l(r),t=P()},m(r,f){n[e].m(r,f),_(r,t,f),s=!0},p(r,[f]){let o=e;e=c(r),e===o?n[e].p(r,f):(W(),$(n[o],1,1,()=>{n[o]=null}),z(),l=n[e],l?l.p(r,f):(l=n[e]=i[e](r),l.c()),w(l,1),l.m(t.parentNode,t))},i(r){s||(w(l),s=!0)},o(r){$(l),s=!1},d(r){r&&h(t),n[e].d(r)}}}function ee(a){if(a.name&&a.name!=="")return`${a.name} `;{let e=`Ex ${a.exercise} Q-${a.questionNo}`;return(a.part||a.part!=0)&&(e+=` pt ${a.part}`),e}}function Ce(a,e,l){let{tcode:t}=e,{selectedQuestions:s}=e,{uiMode:i}=e;return a.$$set=n=>{"tcode"in n&&l(0,t=n.tcode),"selectedQuestions"in n&&l(1,s=n.selectedQuestions),"uiMode"in n&&l(2,i=n.uiMode)},[t,s,i]}class xe extends U{constructor(e){super(),q(this,e,Ce,$e,H,{tcode:0,selectedQuestions:1,uiMode:2})}}function te(a,e,l){const t=a.slice();return t[7]=e[l],t}function le(a,e,l){const t=a.slice();return t[10]=e[l],t}function re(a){let e,l,t,s,i,n=V(a[7].exercises),c=[];for(let r=0;r<n.length;r+=1)c[r]=se(le(a,n,r));return{c(){e=k("div");for(let r=0;r<c.length;r+=1)c[r].c();l=x(),this.h()},l(r){e=E(r,"DIV",{class:!0});var f=M(e);for(let o=0;o<c.length;o+=1)c[o].l(f);l=I(f),f.forEach(h),this.h()},h(){C(e,"class","bg-stone-600 mx-6 mt-1 mb-1 rounded-md flex flex-col")},m(r,f){_(r,e,f);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(e,null);S(e,l),i=!0},p(r,f){if(f&25){n=V(r[7].exercises);let o;for(o=0;o<n.length;o+=1){const m=le(r,n,o);c[o]?c[o].p(m,f):(c[o]=se(m),c[o].c(),c[o].m(e,l))}for(;o<c.length;o+=1)c[o].d(1);c.length=n.length}},i(r){i||(r&&fe(()=>{i&&(s&&s.end(1),t=he(e,X,{duration:400}),t.start())}),i=!0)},o(r){t&&t.invalidate(),r&&(s=me(e,X,{duration:1e3})),i=!1},d(r){r&&h(e),F(c,r),r&&s&&s.end()}}}function se(a){let e,l,t=a[10]+"",s,i,n,c;function r(){return a[6](a[10])}return{c(){e=k("button"),l=R("Ex: "),s=R(t),this.h()},l(f){e=E(f,"BUTTON",{class:!0});var o=M(e);l=A(o,"Ex: "),s=A(o,t),o.forEach(h),this.h()},h(){C(e,"class",i=`p-1 m-1 rounded-lg  px-2 mx-6 ${a[3]==a[10]?"bg-gray-800 text-red-600":"bg-gray-400"}`)},m(f,o){_(f,e,o),S(e,l),S(e,s),n||(c=ce(e,"click",r),n=!0)},p(f,o){a=f,o&1&&t!==(t=a[10]+"")&&G(s,t),o&9&&i!==(i=`p-1 m-1 rounded-lg  px-2 mx-6 ${a[3]==a[10]?"bg-gray-800 text-red-600":"bg-gray-400"}`)&&C(e,"class",i)},d(f){f&&h(e),n=!1,c()}}}function ne(a){let e,l,t=a[7].chapter+"",s,i,n,c,r,f;function o(){return a[5](a[7])}let m=a[7].chapter==a[2]&&re(a);return{c(){e=k("button"),l=R("Chapter: "),s=R(t),n=x(),m&&m.c(),c=P(),this.h()},l(g){e=E(g,"BUTTON",{class:!0});var b=M(e);l=A(b,"Chapter: "),s=A(b,t),b.forEach(h),n=I(g),m&&m.l(g),c=P(),this.h()},h(){C(e,"class",i=`p-1 m-1 rounded-lg  px-2 ${a[2]==a[7].chapter?"bg-stone-600 text-red-600":"bg-gray-700"}`)},m(g,b){_(g,e,b),S(e,l),S(e,s),_(g,n,b),m&&m.m(g,b),_(g,c,b),r||(f=ce(e,"click",o),r=!0)},p(g,b){a=g,b&1&&t!==(t=a[7].chapter+"")&&G(s,t),b&5&&i!==(i=`p-1 m-1 rounded-lg  px-2 ${a[2]==a[7].chapter?"bg-stone-600 text-red-600":"bg-gray-700"}`)&&C(e,"class",i),a[7].chapter==a[2]?m?(m.p(a,b),b&5&&w(m,1)):(m=re(a),m.c(),w(m,1),m.m(c.parentNode,c)):m&&(W(),$(m,1,1,()=>{m=null}),z())},d(g){g&&(h(e),h(n),h(c)),m&&m.d(g),r=!1,f()}}}function Ie(a){let e,l,t=V(a[0]),s=[];for(let i=0;i<t.length;i+=1)s[i]=ne(te(a,t,i));return{c(){e=k("div"),l=k("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=E(i,"DIV",{class:!0});var n=M(e);l=E(n,"DIV",{class:!0});var c=M(l);for(let r=0;r<s.length;r+=1)s[r].l(c);c.forEach(h),n.forEach(h),this.h()},h(){C(l,"class","flex flex-col justify-center w-full flex-wrap "),C(e,"class","p-2 m-1 border-2 border-white rounded-lg max-h-[500px] overflow-y-auto")},m(i,n){_(i,e,n),S(e,l);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(l,null)},p(i,[n]){if(n&31){t=V(i[0]);let c;for(c=0;c<t.length;c+=1){const r=te(i,t,c);s[c]?s[c].p(r,n):(s[c]=ne(r),s[c].c(),s[c].m(l,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=t.length}},i:N,o:N,d(i){i&&h(e),F(s,i)}}}function Me(a,e,l){let{chapter_map_array:t}=e,{setChapter:s}=e,{selectedChapter:i}=e,{selectedEx:n}=e,{setEx:c}=e;const r=o=>s(o.chapter),f=o=>c(o);return a.$$set=o=>{"chapter_map_array"in o&&l(0,t=o.chapter_map_array),"setChapter"in o&&l(1,s=o.setChapter),"selectedChapter"in o&&l(2,i=o.selectedChapter),"selectedEx"in o&&l(3,n=o.selectedEx),"setEx"in o&&l(4,c=o.setEx)},[t,s,i,n,c,r,f]}class Se extends U{constructor(e){super(),q(this,e,Me,Ie,H,{chapter_map_array:0,setChapter:1,selectedChapter:2,selectedEx:3,setEx:4})}}async function Te(a){const e=[],l=[];for(const t of a)l.includes(t.chapter)||l.push(t.chapter);l.sort((t,s)=>t-s);for(let t=0;t<l.length;t++){const s=l[t];e.push({chapter:s,exercises:[]})}for(let t=0;t<e.length;t++){const s=e[t].chapter;for(let i=0;i<a.length;i++){const n=a[i];n.chapter==s&&(e[t].exercises.includes(n.exercise)||e[t].exercises.push(n.exercise))}}return e}function Be(a){let e,l,t,s,i,n,c;return t=new Se({props:{chapter_map_array:a[5],setChapter:a[6],selectedChapter:a[4],selectedEx:a[2],setEx:a[7]}}),n=new xe({props:{selectedQuestions:a[3],tcode:a[0],uiMode:a[1]}}),{c(){e=k("div"),l=k("div"),B(t.$$.fragment),s=x(),i=k("div"),B(n.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0});var f=M(e);l=E(f,"DIV",{class:!0});var o=M(l);D(t.$$.fragment,o),o.forEach(h),s=I(f),i=E(f,"DIV",{class:!0});var m=M(i);D(n.$$.fragment,m),m.forEach(h),f.forEach(h),this.h()},h(){C(l,"class","w-2/12"),C(i,"class","w-10/12"),C(e,"class","flex")},m(r,f){_(r,e,f),S(e,l),Q(t,l,null),S(e,s),S(e,i),Q(n,i,null),c=!0},p(r,[f]){const o={};f&32&&(o.chapter_map_array=r[5]),f&16&&(o.selectedChapter=r[4]),f&4&&(o.selectedEx=r[2]),t.$set(o);const m={};f&8&&(m.selectedQuestions=r[3]),f&1&&(m.tcode=r[0]),f&2&&(m.uiMode=r[1]),n.$set(m)},i(r){c||(w(t.$$.fragment,r),w(n.$$.fragment,r),c=!0)},o(r){$(t.$$.fragment,r),$(n.$$.fragment,r),c=!1},d(r){r&&h(e),j(t),j(n)}}}function De(a,e,l){let{questions:t}=e,{tcode:s}=e,{uiMode:i=!0}=e,n=[],c="1.1",r=1,f=[];function o(){n.sort((d,y)=>d.sortOrder-y.sortOrder)}function m(){l(3,n=[]);for(let d=0;d<t.length;d++){const y=t[d];y.chapter===r&&y.exercise===c&&(i?y.status=="final"&&n.push(y):n.push(y))}}function g(d){l(4,r=d);for(let y=0;y<f.length;y++){const T=f[y];if(T.chapter==r&&T.exercises.length>0){l(2,c=T.exercises[0]),b(c);return}}}function b(d){l(2,c=d),m(),o()}return ae(async()=>{l(5,f=await Te(t)),g(f[0].chapter)}),a.$$set=d=>{"questions"in d&&l(8,t=d.questions),"tcode"in d&&l(0,s=d.tcode),"uiMode"in d&&l(1,i=d.uiMode)},a.$$.update=()=>{a.$$.dirty&260&&(t.filter(d=>d.exercise===c).length,t.filter(d=>d.exercise===c&&d.status==="empty").length,t.filter(d=>d.exercise===c&&d.status==="filled").length,t.filter(d=>d.exercise===c&&d.status==="locked").length,t.filter(d=>d.exercise===c&&d.status==="final").length)},[s,i,c,n,r,f,g,b,t]}class Qe extends U{constructor(e){super(),q(this,e,De,Be,H,{questions:8,tcode:0,uiMode:1})}}function je(a){let e;return{c(){e=R(a[0])},l(l){e=A(l,a[0])},m(l,t){_(l,e,t)},p(l,t){t&1&&G(e,l[0])},d(l){l&&h(e)}}}function ie(a){let e,l;return e=new Qe({props:{questions:a[1],tcode:a[0],uiMode:!1}}),{c(){B(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,s){Q(e,t,s),l=!0},p(t,s){const i={};s&2&&(i.questions=t[1]),s&1&&(i.tcode=t[0]),e.$set(i)},i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function Ve(a){let e,l,t,s,i,n,c,r,f,o,m,g,b,d,y,T,L,O;l=new pe({props:{bgColor:"bg-stone-600",icon:oe.TEST,$$slots:{default:[je]},$$scope:{ctx:a}}});let v=a[1]&&ie(a);return{c(){e=k("div"),B(l.$$.fragment),t=x(),v&&v.c(),s=x(),i=k("br"),n=x(),c=k("br"),r=x(),f=k("br"),o=x(),m=k("br"),g=x(),b=k("br"),d=x(),y=k("br"),T=x(),L=k("br"),this.h()},l(u){e=E(u,"DIV",{class:!0});var p=M(e);D(l.$$.fragment,p),p.forEach(h),t=I(u),v&&v.l(u),s=I(u),i=E(u,"BR",{}),n=I(u),c=E(u,"BR",{}),r=I(u),f=E(u,"BR",{}),o=I(u),m=E(u,"BR",{}),g=I(u),b=E(u,"BR",{}),d=I(u),y=E(u,"BR",{}),T=I(u),L=E(u,"BR",{}),this.h()},h(){C(e,"class","flex justify-center p-2 ")},m(u,p){_(u,e,p),Q(l,e,null),_(u,t,p),v&&v.m(u,p),_(u,s,p),_(u,i,p),_(u,n,p),_(u,c,p),_(u,r,p),_(u,f,p),_(u,o,p),_(u,m,p),_(u,g,p),_(u,b,p),_(u,d,p),_(u,y,p),_(u,T,p),_(u,L,p),O=!0},p(u,p){const J={};p&17&&(J.$$scope={dirty:p,ctx:u}),l.$set(J),u[1]?v?(v.p(u,p),p&2&&w(v,1)):(v=ie(u),v.c(),w(v,1),v.m(s.parentNode,s)):v&&(W(),$(v,1,1,()=>{v=null}),z())},i(u){O||(w(l.$$.fragment,u),w(v),O=!0)},o(u){$(l.$$.fragment,u),$(v),O=!1},d(u){u&&(h(e),h(t),h(s),h(i),h(n),h(c),h(r),h(f),h(o),h(m),h(g),h(b),h(d),h(y),h(T),h(L)),j(l),v&&v.d(u)}}}function Ne(a){let e,l,t,s;return e=new be({props:{isAdmin:a[3],isLogin:a[2]}}),t=new ge({props:{$$slots:{default:[Ve]},$$scope:{ctx:a}}}),{c(){B(e.$$.fragment),l=x(),B(t.$$.fragment)},l(i){D(e.$$.fragment,i),l=I(i),D(t.$$.fragment,i)},m(i,n){Q(e,i,n),_(i,l,n),Q(t,i,n),s=!0},p(i,[n]){const c={};n&8&&(c.isAdmin=i[3]),n&4&&(c.isLogin=i[2]),e.$set(c);const r={};n&19&&(r.$$scope={dirty:n,ctx:i}),t.$set(r)},i(i){s||(w(e.$$.fragment,i),w(t.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),$(t.$$.fragment,i),s=!1},d(i){i&&h(l),j(e,i),j(t,i)}}}function Re(a,e,l){let t,s,i=!1,n=!1;return ae(async()=>{try{l(0,t=new URLSearchParams(location.search).get("tcode"));const c=await _e(`${de}/command`,{command:"getSyllabus",tcode:t});if(c){const r=await c.json();l(1,s=r.data.syllabus),l(2,i=ke()),l(3,n=Ee())}else{const r=await c.json();chapter_map_array=await chapter_map(s),K.push(r.message)}}catch{K.push("System error")}}),[t,s,i,n]}class Ye extends U{constructor(e){super(),q(this,e,Re,Ne,H,{})}}export{Ye as component};
